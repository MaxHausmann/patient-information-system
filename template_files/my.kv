#:kivy 1.11.1

ScreenManager:
    LoginWindow:
    CreateAccountWindow:
    MainWindow:

<CreateAccountWindow>:
    name: "create_acc"
    input_username: username
    input_email: email
    input_password: password

    BoxLayout:

        orientation: "vertical"
        padding: root.width/4, root.height/3
        spacing: 20

        Label:
            text: "NEUER ACCOUNT"
            font_size: 35
            text_size: self.size
            halign: 'center'
            valign: 'bottom'

        FloatLayout:

            canvas.before:
                Color:
                    rgba: .1, .1, .1, 1
                Rectangle:
                    size: self.width + 50, self.height + 20
                    pos: self.pos[0] - 25, self.pos[1] - 25

            StdFormLabel: 
                text: "Benutzername"
                pos_hint: {"x":0, "top":0.9}

            StdFormInput:
                id: username
                hint_text: "Max_Mustermann"
                pos_hint: {"x":0.3, "top":0.9}

            StdFormLabel:
                text: "Email-Adresse"
                pos_hint: {"x":0, "top":0.65}

            StdFormInput:
                id: email
                hint_text: "max.mustermann@uniklinikum.de"
                pos_hint: {"x":0.3, "top":0.65}

            StdFormLabel: 
                text: "Passwort"
                pos_hint: {"x":0, "top":0.4}

            StdFormInput:
                id: password
                password: True
                password_mask: "x"
                pos_hint: {"x":0.3, "top":0.4}

            StdFormButton:
                text: "Abbrechen"
                pos_hint: {"x":0, "top":0.1}
                on_release: 
                    root.btn_abort()
                    root.manager.transition.direction = "left"

            StdFormButton: 
                text: "Erstellen"
                background_color: 102/255, 255/255, 102/255, 1
                pos_hint: {"x":0.5, "top":0.1}
                on_release:
                    root.btn_create_acc()
                    root.manager.transition.direction = "left"



<LoginWindow>:
    name: "login"
    input_username: username
    input_password: password

    BoxLayout:

        orientation: "vertical"
        padding: root.width/4, root.height/3
        spacing: 20

        Label:
            text: "LOGIN"
            font_size: 35
            text_size: self.size
            halign: 'center'
            valign: 'bottom'

        FloatLayout:

            canvas.before:
                Color:
                    rgba: .1, .1, .1, 1
                Rectangle:
                    size: self.width + 50, self.height + 20
                    pos: self.pos[0] - 25, self.pos[1] - 25

            StdFormLabel: 
                text: "Benutzername"
                pos_hint: {"x":0, "top":0.9}

            StdFormInput:
                id: username
                pos_hint: {"x":0.3, "top":0.9}

            StdFormLabel: 
                text: "Passwort"
                pos_hint: {"x":0, "top":0.6}

            StdFormInput:
                id: password
                password: True
                password_mask: "x"
                pos_hint: {"x":0.3, "top":0.6}

            StdFormButton:
                text: "Neuer Account"
                pos_hint: {"x":0, "top":0.2}
                on_release: 
                    root.btn_create_acc()
                    root.manager.transition.direction = "right"

            StdFormButton: 
                text: "Einloggen"
                background_color: 0, 153/255, 255/255, 1
                pos_hint: {"x":0.5, "top":0.2}
                on_release:
                    root.btn_login()
                    root.manager.transition.direction = "up"


<MainWindow>:
    name: "main"
    n: n
    email: email
    created:created

    FloatLayout:
        Label:
            id: n
            pos_hint:{"x": 0.1, "top":0.9}
            size_hint:0.8, 0.2
            text: "Account Name: "

        Label:
            id: email
            pos_hint:{"x": 0.1, "top":0.7}
            size_hint:0.8, 0.2
            text: "Email: "

        Label:
            id: created
            pos_hint:{"x": 0.1, "top":0.5}
            size_hint:0.8, 0.2
            text: "Created: "

        Button:
            pos_hint:{"x":0.2, "y": 0.1}
            size_hint:0.6,0.2
            text: "Log Out"
            on_release:
                app.root.current = "login"
                root.manager.transition.direction = "down"

<StdFormInput@TextInput>:
    cursor_color: .1, .1, .1, 1
    multiline: False
    write_tab: False
    size_hint: 0.7, 0.2

<StdFormLabel@Label>:
    size: self.texture_size
    text_size: self.size
    halign: 'right'
    valign: 'middle'
    size_hint: 0.25, 0.2

<StdFormButton@Button>:
    size_hint: 0.5, 0.2